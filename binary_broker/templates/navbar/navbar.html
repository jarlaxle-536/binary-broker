{% load static %}
{% load i18n %}

{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}

<nav class="navbar navbar-expand-lg navbar-light bg-dark">
  <div class="collapse navbar-collapse" id="nav_navigation">

    <ul class="navbar-nav">
      <li class="nav-item pull-left">
        <button class="btn btn-dark">
          <a class="nav-link  text-white" href="{% url 'main_page' %}">
            {% trans 'MainPage' %}
          </a>
        </button>
      </li>

      <li class="nav-item pull-left">
        <button class="btn btn-warning">
          <a class="nav-link text-dark" href="{% url 'commodity_detail' id_of_commodity_to_trade %}">
            {% trans 'Trading' %}
          </a>
        </button>
      </li>

      <li class="nav-item pull-right">
        <div class="dropdown">
          <button class="btn dropdown-toggle nav-link text-white" type="button" id="language_menu_btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <a class="nav-link text-white" href="#">
              {% trans 'LanguageString' %}: {{LANGUAGE_CODE}}
            </a>
          </button>
          <div class="dropdown-menu" style="width: 100%;" aria-labelledby="language_menu_btn">
            {% for language in languages %}
              <a class="dropdown-item full-width btn-dark" href="{% url 'set_language' forloop.counter0 %}">
                {{language.name_local.capitalize}}
              </a>
            {% endfor %}
          </div>
        </div>
      </li>

      <li class="nav-item pull-right">
          <div class="nav-link text-white display-6" id="current_time_string" style="text-overflow: ellipsis; overflow:hidden;">
            {{time_string}}
          </div>
      </li>
      {% if user.is_authenticated %}
      <li class="nav-item">
      <div class="btn-group">
        <button type="button" class="btn btn-primary dropdown-toggle pull-right" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <a class="nav-link" href="#">
          {{ user }}
          </a>
        </button>
        <div class="dropdown-menu w-100">
          <a class="dropdown-item" href="{% url 'user_profile'%}">
            {% trans 'ProfileString' %}
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="{% url 'logout' %}">
            {% trans 'LogoutString' %}
          </a>
        </div>
      </div>
      </li>
      {% comment %}
      <li class="nav-item pull-right">
        <div class="form-group">
       <select class="nav-link form-control" id="select_account">
         <option class="dropdown-item" value="Demo">
           {{user.profile.demo_account}}
         </option>
         <option class="dropdown-item" value="Real">
           {{user.profile.real_account}}
         </option>
       </select>
      </div>
      </li>
      {% endcomment %}
      {% else %}
      <li class="nav-item" id="enter_button">
        <button class="btn btn-primary" data-toggle="modal" data-target="#auth_window">
          <a class="nav-link text-white" href="#">
            {% trans 'EnterString' %}
          </a>
        </button>
      </li>
      {% endif %}
      {% include 'auth_dialog.html' %}
    </ul>
  </div>
</nav>
